{"version":3,"names":["generate","require","default","traverse","transformSync","globals","Set","functionArgsToWorkletize","Map","buildWorkletString","t","fun","closureVariables","name","inputMap","prependClosureVariablesIfNecessary","closureDeclaration","variableDeclaration","variableDeclarator","objectPattern","filter","v","map","variable","objectProperty","identifier","prependClosure","path","length","parent","type","node","body","unshift","visitor","expression","program","find","workletFunction","functionExpression","params","code","transformed","plugins","compact","sourceMaps","inputSourceMap","ast","babelrc","configFile","comments","makeWorkletName","isObjectMethod","key","isFunctionDeclaration","id","isFunctionExpression","isIdentifier","makeWorklet","state","functionName","closure","DirectiveLiteral","value","getFunctionParent","parentPath","remove","codeObject","sourceFileName","file","opts","filename","presets","loose","ReferencedIdentifier","global","hasOwnProperty","has","parentNode","property","computed","currentScope","scope","bindings","set","variables","Array","from","values","privateFunctionId","clone","cloneNode","funExpression","funString","location","relativeSourceLocation","relative","cwd","loc","start","line","column","statements","expressionStatement","assignmentExpression","memberExpression","objectExpression","stringLiteral","push","returnStatement","newFun","blockStatement","processWorkletFunction","isFunctionParent","replacement","callExpression","needDeclaration","isScopable","isExportNamedDeclaration","replaceWith","processIfWorkletNode","directives","some","directive","isDirectiveLiteral","processWorklets","callee","indexes","get","isArray","forEach","index","module","exports","types","pre","add","functionsToWorkletize","args","enter"],"sourceRoot":"../../src","sources":["index.js"],"mappings":"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"}